<section class="px-[18px] mb-16 lg:px-[30px] max-w-[1900px] mx-auto">
  <div
    class="page-title text-center mt-[30px] mb-[24px] max-w-2xl mx-auto flex flex-col justify-center items-center"
  >
    <h1
      class="text-[23px] font-normal text-[#212322] uppercase leading-[1.8] relative pb-3 after:content-[''] after:w-9 after:h-[3px] after:bg-[#db864e] after:absolute after:left-1/2 after:-translate-x-1/2 after:bottom-0"
    >
      My account
    </h1>
  </div>
  <a
    class="font-secondary flex justify-center text-sm uppercase opacity-100 hover:opacity-70 transition-opacity duration-200 cursor-pointer mb-9"
    >Log out</a
  >
  <div class="account-details-container flex flex-col justify-between md:flex-row">
    <div class="order-history md:w-2/3">
      <h2 class="uppercase text-[#3e4827] font-normal text-base md:text-[19px] leading-relaxed mb-4">Order history</h2>
      {% assign number_of_orders = customer.orders | size %}
      {% if number_of_orders > 0 %}
        <div class="order-details md:mr-[30px] mb-[30px]">
          <!-- MOBILE: stacked card view -->
          <ul class="sm:hidden space-y-3">
            {% for order in customer.orders %}
              <li class="border border-gray-200 rounded-sm p-4">
                <div class="flex items-center justify-between">
                  <a
                    href="{{ order.customer_url }}"
                    class="font-secondary flex items-center gap-1 opacity-100 hover:opacity-70 transition-opacity duration-200"
                  >
                    {{ order.name }}
                    <!-- RIGHT ARROW ICON -->
                    <span class="block">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="w-4 h-4"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                      </svg>
                    </span>
                  </a>
                  <div class="text-sm text-gray-500">{{ order.total_price | money }}</div>
                </div>

                <div class="mt-3 grid grid-cols-2 gap-y-2 text-sm font-secondary">
                  <span class="text-gray-500">Date</span>
                  <span>{{ order.created_at | date: '%b %-d, %Y' }}</span>

                  <span class="text-gray-500">Payment</span>
                  <span>{{ order.financial_status_label }}</span>

                  <span class="text-gray-500">Fulfillment</span>
                  <span>{{ order.fulfillment_status_label }}</span>
                </div>
              </li>
            {% endfor %}
          </ul>

          <!-- DESKTOP: table view -->
          <div class="hidden sm:block overflow-x-auto">
            <table class="min-w-full border-collapse border border-gray-200 text-left text-sm">
              <thead class="bg-gray-50 border-b border-gray-200">
                <tr>
                  <th class="px-4 py-2 font-bold font-secondary">Order</th>
                  <th class="px-4 py-2 font-bold font-secondary">Date</th>
                  <th class="px-4 py-2 font-bold font-secondary">Payment Status</th>
                  <th class="px-4 py-2 font-bold font-secondary">Fulfillment Status</th>
                  <th class="px-4 py-2 font-bold font-secondary">Total</th>
                </tr>
              </thead>
              <tbody>
                {% for order in customer.orders %}
                  <tr class="border-t border-gray-200">
                    <td class="px-4 py-2 font-secondary">
                      <a
                        href="{{ order.customer_url }}"
                        class="flex items-center gap-1 opacity-100 hover:opacity-70 transition-opacity duration-200 cursor-pointer"
                      >
                        {{ order.name }}
                        <!-- RIGHT ARROW ICON -->
                        <span class="block">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="w-4 h-4"
                          >
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                          </svg>
                        </span>
                      </a>
                    </td>
                    <td class="px-4 py-2 font-secondary">{{ order.created_at | date: '%b %-d, %Y' }}</td>
                    <td class="px-4 py-2 font-secondary">{{ order.financial_status_label }}</td>
                    <td class="px-4 py-2 font-secondary">{{ order.fulfillment_status_label }}</td>
                    <td class="px-4 py-2 font-secondary">{{ order.total_price | money }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>

      {% else %}
        <div class="no-orders">
          <p class="font-secondary text-sm leading-[30px] mb-4">You haven't placed any orders yet.</p>
        </div>
      {% endif %}
    </div>
    <div class="account-details md:w-1/3">
      <h2 class="uppercase text-[#3e4827] font-normal text-base md:text-[19px] leading-relaxed mb-4">
        Account details
      </h2>
      <div class="user-details mb-6">
        <div class="font-secondary text-sm md:text-base mb-2 leading-8">{{ customer.default_address | format_address }}</div>
      </div>
      <div>
        <a
            href="{{ routes.account_addresses_url }}"
          class="py-[14px] px-[30px] text-center w-full bg-[#f0f0f0] uppercase text-xs md:text-sm tracking-[1px] leading-[30px] transition-all duration-200 ease-in-out hover:bg-[#e5e5e5] cursor-pointer md:w-fit"
        >
          View addresses ({{ customer.addresses_count }})
        </a>
      </div>
    </div>
  </div>
</section>
